<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>Text Analysis Api</title>

	<!-- CSS -->
	<!-- load bootstrap and our own personal stylesheet -->
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/superhero/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="css/style.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
</head>

<body>
	<div class="container">
		<div class="jumbotron">
			<h1>This Is TextAnalysis Api!</h1>
			<p>
				Get text analysis extract an event from a text
				<a href="https://github.com/freedomloader/text-analysis">@jbbunmat</a>
			</p>

			<div class="container">
				<form>
					<div class="form-group">
						<label for="event">Enter Your Event Message:</label>
						<textarea type="text" class="form-control" id="event" placeholder="Enter event" rows="3"
							cols="50"></textarea>
					</div>
					<button type="button" name="load_data" id="load_data" class="btn btn-info">
						Load Data
					</button>
				</form>
				<div class="container">
					<div class="table-responsive">
						<br />
						<br />
						<div id="employee_table"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>

<script>
	$(document).ready(function () {
		$("#load_data").click(function () {
			$.ajax({
				url: "/eventcsv",
				dataType: "text",
				/*data: {
						   username: $('[name="username"]').val(),
						   email: $('[name="email"]').val(),
						   password: $('[name="password"]').val()
						},*/
				error: function (error) {
					//alert(JSON.stringify(error));
				},
				success: function (data) {
					var employee_data = data.split(/\r?\n|\r/);
					var table_data = '<table class="table table-bordered table-striped">';
					for (var count = 0; count < employee_data.length; count++) {
						var cell_data = employee_data[count].split(",");
						table_data += "<tr>";
						for (
							var cell_count = 0;
							cell_count < cell_data.length;
							cell_count++
						) {
							if (count === 0) {
								table_data += "<th>" + cell_data[cell_count] + "</th>";
							} else {
								table_data += "<td>" + cell_data[cell_count] + "</td>";
							}
						}
						table_data += "</tr>";
					}
					table_data += "</table>";
					$("#employee_table").html(table_data);
				}
			});
		});
	});
	
</script>
